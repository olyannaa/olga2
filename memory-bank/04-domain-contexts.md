# Декомпозиция домена и словарь сущностей

## Контексты (bounded contexts)
- Идентификация и доступ: пользователи, роли, JWT, флаг `canApproveSubcontracts`.
- Организационная структура: подразделения, связь пользователя с подразделениями, контрагенты.
- Проекты: карточка проекта, бюджет, статус, менеджер, подразделение.
- WBS: разделы проекта и их плановые даты.
- Задачи и workflow: задачи разных типов, статусы, история, фактические даты.
- Команда проекта: участники, проектные роли.
- Субподряды: заявки, согласование, финальная стоимость.
- Таймшиты: записи времени и day‑off.
- Файлы: метаданные файлов, папка проекта (stub).
- Коммуникации: чат проекта.
- Аналитика: прогресс, затраты, трудозатраты.
- Аудит: журнал действий.

## Словарь ключевых сущностей
- Пользователь: учетная запись с ролями, подразделениями и ставками.
- Подразделение: орг‑единица; пользователь может иметь несколько, одно — primary.
- Контрагент: внешняя организация, к которой могут быть привязаны исполнители.
- Проект: карточка, бюджет, статус, менеджер, подразделение, внешняя ссылка.
- Раздел проекта (WBS section): строка структуры работ; источник плановых дат.
- Задача: единица выполнения с типом, статусом и исполнителем.
- Субподряд: задача типа `subcontract` с согласованием стоимости.
- Участник проекта: связь Project ↔ User с ролью в проекте.
- Запись таймшита: `time_entries` по задаче и дате.
- Day‑off: отметка отсутствия на дату (б/к/о/в).
- Файл проекта: метаданные файла/ссылки.
- Сообщение чата: текст внутри проекта.
- Аудит: запись факта действия пользователя.

## Ключевые процессы
- Создание проекта → назначение менеджера → команда проекта.
- Ведение WBS → авто‑создание задач по разделам.
- Создание задач вне WBS (ручные проектные/личные/бухгалтерские).
- Создание субподряда → согласование админом → блокировка исполнителя.
- Учет времени → авто‑старт задач при первом time entry.
- Аналитика по проекту → прогресс, трудозатраты, стоимость.
