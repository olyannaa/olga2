# 50 основных QA‑сценариев (уникальные и всеобъемлющие)

Формат каждого сценария: **Роль/цель → шаги → ожидаемо**.  
Старайся фиксировать баги/отклонения прямо по этим пунктам.

1) **Admin: вход и меню.**  
   Шаги: войти `admin@iset.local` → проверить боковое меню.  
   Ожидаемо: доступны Проекты/Задачи/Заявки/Учет времени/Орг‑структура/Настройки.

2) **Approval_admin: вход и доступ к заявкам.**  
   Шаги: войти `approval@iset.local` → открыть `/approvals`.  
   Ожидаемо: страница заявок доступна.

3) **Department_head: вход и ограниченное меню.**  
   Шаги: войти `depthead@iset.local` → проверить меню.  
   Ожидаемо: нет доступа к заявкам (если не предусмотрено), орг‑структура доступна.

4) **Project_manager: вход и доступ к проектам/табелю.**  
   Шаги: войти `pm@iset.local` → открыть `/projects`, `/time-tracking`.  
   Ожидаемо: доступ есть, заявок нет.

5) **Lead_specialist: вход и ограничение бюджета.**  
   Шаги: войти `lead@iset.local` → открыть проект → свойства.  
   Ожидаемо: бюджет/стоимости скрыты.

6) **Executor1: вход и доступ к задачам/табелю.**  
   Шаги: войти `executor1@iset.local` → открыть `/tasks`, `/time-tracking`.  
   Ожидаемо: доступ есть, орг‑структуры нет.

7) **Executor2 (контракт): вход и отображение ставок.**  
   Шаги: войти `executor2@iset.local` → открыть проект → команда.  
   Ожидаемо: ставка отображается как контрактная.

8) **Accountant: вход и доска бухгалтера.**  
   Шаги: войти `accountant@iset.local` → открыть `/tasks`.  
   Ожидаемо: заголовок «Задачи бухгалтера», задачи бухгалтера видны.

9) **Contractor executor: вход и доступ.**  
   Шаги: войти `contractor1@iset.local` → открыть `/tasks`.  
   Ожидаемо: видит только свои задачи, орг‑структура не доступна.

10) **Выход из системы.**  
    Шаги: нажать «Выйти».  
    Ожидаемо: редирект на логин, токены очищены.

11) **Создание подразделения (Admin).**  
    Шаги: `/organization` → «Добавить подразделение» → сохранить.  
    Ожидаемо: подразделение в списке.

12) **Редактирование подразделения (Admin).**  
    Шаги: открыть карточку подразделения → изменить описание → сохранить.  
    Ожидаемо: изменения видны в списке.

13) **Удаление подразделения с подтверждением (Admin).**  
    Шаги: удалить подразделение → подтвердить.  
    Ожидаемо: удалено, подтверждение показано.

14) **Создание сотрудника с мульти‑подразделениями (Admin).**  
    Шаги: «Добавить сотрудника» → выбрать 2+ подразделения → выбрать primary → сохранить.  
    Ожидаемо: сотрудник создан, primary отображается корректно.

15) **Запрет contractor + departments (Admin).**  
    Шаги: попытаться назначить отдел пользователю‑контрагенту.  
    Ожидаемо: ошибка «Contractor users cannot have departments».

16) **Доступы department_head к орг‑структуре.**  
    Шаги: войти как department_head → `/organization`.  
    Ожидаемо: видит только своё подразделение и сотрудников.

17) **Видимость всех подразделений для admin/accountant.**  
    Шаги: войти как admin и accountant → `/organization`.  
    Ожидаемо: видят все подразделения.

18) **Создание контрагента (Admin).**  
    Шаги: вкладка «Контрагенты» → «Добавить» → сохранить.  
    Ожидаемо: контрагент в списке.

19) **Редактирование и удаление контрагента (Admin).**  
    Шаги: открыть контрагента → изменить данные → удалить (подтвердить).  
    Ожидаемо: данные обновлены, удаление подтверждено.

20) **Создание подрядчика‑исполнителя (Admin).**  
    Шаги: внутри контрагента → «Добавить исполнителя».  
    Ожидаемо: пользователь создан с contractorId.

21) **Создание проекта с подразделением (Admin).**  
    Шаги: «Новый проект» → указать departmentId → сохранить.  
    Ожидаемо: проект в списке, отображается подразделение.

22) **Проект без подразделения (Admin).**  
    Шаги: создать/отредактировать проект без departmentId.  
    Ожидаемо: проект виден у admin в списке «Все подразделения».

23) **Фильтр проектов по подразделению.**  
    Шаги: `/projects` → сменить фильтр (Engineering/Finance/All).  
    Ожидаемо: список корректно фильтруется.

24) **Дефолтный фильтр = primaryDepartmentId.**  
    Шаги: войти как пользователь с primary → `/projects`.  
    Ожидаемо: выбран primary департамент.

25) **Команда проекта: фильтр по подразделению.**  
    Шаги: проект → вкладка «Команда» → «Добавить участника» → фильтр по отделу.  
    Ожидаемо: список участников ограничивается выбранным отделом.

26) **Команда проекта: фильтр по контрагентам.**  
    Шаги: «Добавить участника» → фильтр по контрагенту.  
    Ожидаемо: показываются только пользователи контрагента.

27) **Команда проекта: удаление участника.**  
    Шаги: удалить участника → подтвердить.  
    Ожидаемо: участник удалён.

28) **WBS: автосортировка подразделов.**  
    Шаги: создать 1.2 и 1.1 → проверить порядок.  
    Ожидаемо: сортировка 1.1, 1.2.

29) **WBS: ограничение глубины 3 уровня.**  
    Шаги: попытаться создать 4‑й уровень.  
    Ожидаемо: запрет/ошибка.

30) **Гантт: корректная отрисовка шкалы и баров.**  
    Шаги: открыть «Диаграмма Ганта» → прокрутить.  
    Ожидаемо: шкала не ломается, бары кликабельны.

31) **Файлы проекта: загрузка.**  
    Шаги: вкладка «Файлы» → загрузить файл.  
    Ожидаемо: файл появляется в списке.

32) **Чат проекта: отправка сообщения.**  
    Шаги: вкладка «Чат» → отправить сообщение.  
    Ожидаемо: сообщение отображается.

33) **Создание проектной задачи (PM).**  
    Шаги: проект → вкладка «Задачи» → «Новая задача».  
    Ожидаемо: задача создаётся и попадает в канбан проекта.

34) **Создание личной задачи (Admin).**  
    Шаги: `/tasks` → «Новая задача» → тип «Личная».  
    Ожидаемо: задача создаётся и видна в канбане.

35) **Личная задача в табеле.**  
    Шаги: `/time-tracking` → проверить строку «Вне проекта».  
    Ожидаемо: личная задача отображается в «Вне проекта».

36) **Создание бухгалтерской задачи (PM/Admin).**  
    Шаги: создать задачу типа «Бухгалтерская» → назначить бухгалтера.  
    Ожидаемо: у бухгалтера задача с бейджем «Бухгалтер».

37) **Фильтр типов задач на /tasks.**  
    Шаги: переключать «Проектные/Личные/Бухгалтерские/Субподряд».  
    Ожидаемо: выдача меняется по типу.

38) **Проектные задачи не смешиваются с personal/accounting.**  
    Шаги: `/projects/:id/tasks` → проверить список.  
    Ожидаемо: только проектные/субподрядные.

39) **Детали задачи: отображение типа.**  
    Шаги: открыть карточку задачи.  
    Ожидаемо: отображается тип/бейдж.

40) **Назначение задачи исполнителю (PM).**  
    Шаги: назначить задачу Executor → проверить у Executor в /tasks.  
    Ожидаемо: задача видна исполнителю.

41) **Lead_specialist может назначать внутри проекта.**  
    Шаги: войти как lead → назначить исполнителя.  
    Ожидаемо: назначение проходит; бюджета не видно.

42) **Легенда табеля: “+ / День”.**  
    Шаги: открыть `/time-tracking`.  
    Ожидаемо: легенда с “+” и подписью «День».

43) **Списание на несколько задач в один день.**  
    Шаги: списать часы на 2+ задач в один день.  
    Ожидаемо: принимаются любые положительные числа.

44) **Списание на done‑задачу.**  
    Шаги: перевести задачу в done → списать время.  
    Ожидаемо: списание разрешено.

45) **Табель доступен admin.**  
    Шаги: войти как admin → `/time-tracking`.  
    Ожидаемо: доступ без блокировки.

46) **PM видит project_time задачи.**  
    Шаги: PM → `/time-tracking`.  
    Ожидаемо: строки «Project management» по своим проектам.

47) **Переключение Месяц/Неделя.**  
    Шаги: `/time-tracking` → переключить вкладки.  
    Ожидаемо: табель корректно меняется.

48) **Субподряд: создание pending задачи (PM).**  
    Шаги: создать субподрядную задачу с ценой.  
    Ожидаемо: статус pending, задача серая.

49) **Субподряд pending не виден исполнителю.**  
    Шаги: войти как подрядчик → `/tasks`.  
    Ожидаемо: pending‑задача не отображается.

50) **Согласование субподряда (approval_admin).**  
    Шаги: `/approvals` → согласовать дважды (двумя админами) → проверить «Субподряд» в табеле.  
    Ожидаемо: статус approved, final_cost заполнен, в «Субподряд» видны только approved.
