# Задачи v3 — передача состояния

## 1) Ролевая модель
- Глобальные роли: `admin`, `gip`, `executor`, `accountant`.
- Scoped admin определяется наличием `departmentIds`; доступ ограничен подразделениями.
- Флаг `canApproveSubcontracts` даёт доступ к `/approvals` для подразделений админа.
- Проектные роли: `manager`, `lead_specialist`, `executor`, `accountant`.
- Legacy роли (`department_head`, `approval_admin`, `project_manager`, `lead_specialist`) удалены из данных.

## 2) Субподряды
- Создание субподряда возможно только для `manager`/`lead_specialist`.
- Субподряд создаётся по разделу WBS, исполнитель выбирается из команды проекта.
- После `approved` исполнитель блокируется, задача доступна исполнителю и в таймшите.
- `rejected` скрывается из выдачи задач.

## 3) «Мои задачи»
- Drag‑and‑drop доступен всем глобальным ролям.
- ГИП видит только свои назначенные задачи.
- Создание личных задач доступно всем ролям.

## 4) Таймшиты
- Личные задачи отображаются как задачи вне проекта.
- Исполнители могут менять статус своих задач в таймшите.

## 5) Организация
- Отображение подразделений и ролей корректное; пустое подразделение показывается «—».

Остатков по v3 нет; все требования реализованы в текущем коде.
