# Миграции и состояние данных

## Текущее состояние
- Миграции управляются `node-pg-migrate` (`backend/migrations`).
- Ролевая модель обновлена до `admin`, `gip`, `executor`, `accountant`; legacy роли удалены из данных.
- Добавлены контрагенты, привязки к подразделениям, типы задач и согласование субподрядов.

## Легаси/резервы
- В репозитории есть `supabase`‑артефакты фронта, но приложение работает через REST API.
- Таблицы `time_sheets` и `work_calendar` присутствуют, но не используются.
- Таблица `role_migration_backup` создана для перехода ролей, в бизнес‑логике не используется.

## Оставшиеся задачи (по базе)
- Если требуется контроль лимита на день/часов, добавить CHECK/триггер для `time_entries`.
- Очистить legacy enum‑значения при необходимости.
- Реализовать настоящую интеграцию файлового хранилища (Nextcloud).
